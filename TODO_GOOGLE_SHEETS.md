# –ü–∞–º—è—Ç–∫–∞: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Sheets –¥–ª—è Start Loft

## –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ ‚úÖ

1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ `gspread` –∏ `google-auth` –≤ requirements.txt
2. ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω config.py —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ Google Sheets
3. ‚úÖ –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å `backend/google_sheets.py` —Å —Ñ—É–Ω–∫—Ü–∏–µ–π —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
4. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ —ç–Ω–¥–ø–æ–∏–Ω—Ç `/api/registrations`
5. ‚úÖ –°–æ–∑–¥–∞–Ω `.env.example` —Å –Ω–æ–≤—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
6. ‚úÖ –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ `migrate_to_sheets.py`
7. ‚úÖ –ù–∞–ø–∏—Å–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (GOOGLE_SHEETS_SETUP.md)
8. ‚úÖ .gitignore –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç –∫–æ–º–º–∏—Ç–∞ credentials

## –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –≤–∞–º üìã

### 1. –°–æ–∑–¥–∞—Ç—å Service Account –≤ Google Cloud

1. –ó–∞–π—Ç–∏ –Ω–∞ https://console.cloud.google.com/
2. –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç (–∏–ª–∏ –≤—ã–±—Ä–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)
3. –í–∫–ª—é—á–∏—Ç—å Google Sheets API
4. –°–æ–∑–¥–∞—Ç—å Service Account:
   - IAM & Admin ‚Üí Service Accounts ‚Üí Create Service Account
   - –ò–º—è: `startloft-sheets`
   - –°–æ–∑–¥–∞—Ç—å –∫–ª—é—á (JSON format)
5. –°–∫–∞—á–∞—Ç—å JSON —Ñ–∞–π–ª

### 2. –°–æ–∑–¥–∞—Ç—å Google Sheets —Ç–∞–±–ª–∏—Ü—É

1. –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É –Ω–∞ https://sheets.google.com/
2. –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –ø–µ—Ä–≤—ã–π –ª–∏—Å—Ç –≤ **"–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏"** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!)
3. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å ID —Ç–∞–±–ª–∏—Ü—ã –∏–∑ URL:
   ```
   https://docs.google.com/spreadsheets/d/[–í–û–¢_–≠–¢–û–¢_ID]/edit
   ```
4. –ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Ç–∞–±–ª–∏—Ü–µ–π —Å service account:
   - –ö–Ω–æ–ø–∫–∞ "Share"
   - –í—Å—Ç–∞–≤–∏—Ç—å email –∏–∑ JSON (–ø–æ–ª–µ `client_email`)
   - –†–æ–ª—å: Editor
   - –£–±—Ä–∞—Ç—å –≥–∞–ª–æ—á–∫—É "Notify"
   - –ù–∞–∂–∞—Ç—å Share

### 3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ

```bash
cd backend

# –ü–æ–ª–æ–∂–∏—Ç—å JSON —Ñ–∞–π–ª –≤ backend/
# –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –≤: start-loft-cb70bbfaa5b7.json
# (–∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –∏–º—è –≤ .env)

# –°–æ–∑–¥–∞—Ç—å .env –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
cp .env.example .env

# –î–æ–±–∞–≤–∏—Ç—å –≤ .env:
nano .env
```

–î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫–∏:

```env
GOOGLE_SHEETS_ENABLED=true
GOOGLE_SHEETS_CREDENTIALS_FILE=start-loft-cb70bbfaa5b7.json
GOOGLE_SHEETS_SPREADSHEET_ID=–≤–∞—à_—Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–π_id
```

### 4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
cd backend
pip install -r requirements.txt
```

### 5. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

```bash
# –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
python -c "import asyncio; from google_sheets import test_google_sheets_connection; asyncio.run(test_google_sheets_connection())"

# –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö (preview)
python migrate_to_sheets.py --dry-run

# –†–µ–∞–ª—å–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è
python migrate_to_sheets.py
```

### 6. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä

```bash
python fastapi_start_loft.py
```

–¢–µ–ø–µ—Ä—å –≤—Å–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ø–∞–¥–∞—é—Ç –≤ Google Sheets!

### 7. –ù–∞ production —Å–µ—Ä–≤–µ—Ä–µ

```bash
# SSH –Ω–∞ —Å–µ—Ä–≤–µ—Ä
ssh root@151.248.118.210

cd ~/startloft/backend

# –ó–∞–≥—Ä—É–∑–∏—Ç—å JSON credentials (—á–µ—Ä–µ–∑ scp –∏–ª–∏ –¥—Ä—É–≥–∏–º —Å–ø–æ—Å–æ–±–æ–º)
# scp start-loft-*.json root@151.248.118.210:~/startloft/backend/

# –î–æ–±–∞–≤–∏—Ç—å –≤ .env –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
nano .env
# (–¥–æ–±–∞–≤–∏—Ç—å —Ç–µ –∂–µ 3 —Å—Ç—Ä–æ–∫–∏ –∫–∞–∫ –≤—ã—à–µ)

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
source venv/bin/activate
pip install -r requirements.txt

# –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ
python migrate_to_sheets.py --dry-run
python migrate_to_sheets.py

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
pm2 restart startloft-backend
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã

–ó–∞–≥–æ–ª–æ–≤–∫–∏ —Å–æ–∑–¥–∞–¥—É—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:

| ID | –¢—É—Ä–Ω–∏—Ä ID | –ù–∞–∑–≤–∞–Ω–∏–µ —Ç—É—Ä–Ω–∏—Ä–∞ | –§–ò–û | –¢–µ–ª–µ—Ñ–æ–Ω | –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ó–≤–∞–Ω–∏–µ | –ì–æ—Ä–æ–¥/–°—Ç—Ä–∞–Ω–∞ | –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π | –°—Ç–∞—Ç—É—Å | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è | IP | User Agent |

## –ö–∞–∫ –æ—Ç–∫–ª—é—á–∏—Ç—å

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–π–¥—ë—Ç –Ω–µ —Ç–∞–∫, –ø—Ä–æ—Å—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤ `.env`:

```env
GOOGLE_SHEETS_ENABLED=false
```

–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ —Ä–∞–Ω—å—à–µ (—Ç–æ–ª—å–∫–æ MongoDB).

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å ‚ö†Ô∏è

- ‚ùå –ù–ò–ö–û–ì–î–ê –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å JSON —Ñ–∞–π–ª —Å –∫–ª—é—á–∞–º–∏
- ‚úÖ JSON —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ .gitignore
- ‚úÖ –ù–∞ production —Ö—Ä–∞–Ω–∏—Ç—å credentials –±–µ–∑–æ–ø–∞—Å–Ω–æ
- ‚úÖ Service account –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –∫ –æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- üìñ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `GOOGLE_SHEETS_SETUP.md`
- üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: `GOOGLE_SHEETS_QUICKSTART.md`
- üîß –ö–æ–¥ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏: `backend/google_sheets.py`
- üìä –°–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏: `backend/migrate_to_sheets.py`
